# **Telegram Bot for Air Quality Analysis and Forecasting**

Этот Telegram-бот предназначен для анализа и прогнозирования качества воздуха в различных районах на основе исторических данных. Бот использует библиотеку aiogram для взаимодействия с Telegram API и Prophet для построения прогнозов.

## **Основные функции**

- **Анализ исторических данных**: Бот отображает графики изменения уровня загрязнения воздуха по конкретному параметру.
- **Прогнозирование**: С использованием модели Prophet бот строит прогнозы на будущие периоды.
- **Сравнение с ПДК**: На графиках отображается уровень предельно допустимой концентрации (ПДК) для конкретного параметра.
- **Интерактивное взаимодействие**: Пользователь выбирает район из списка, и бот отправляет соответствующие графики.

## **Технологии**

- **Python 2.9.0+**
- **aiogram**: Библиотека для работы с Telegram Bot API.
- **pandas**: Для обработки и анализа данных.
- **matplotlib**: Для построения графиков.
- **Prophet**: Модель для прогнозирования временных рядов.
- **aiofiles**: Для асинхронной работы с файлами.

## **Установка и настройка**

### **1. Установка зависимостей**

1. python -m venv venv - создаём виртуальное окружение в рабочей области
2. venv/scripts/activate - активируем окружение
3. pip install -r requirements.txt - установка нужных для работы библиотек

### **2. Настройка токенов**

1. В рабочей области создайте папку data и в ней файл 'TOKEN.py' добавьте свой токен бота телеграм и ключ API c data.mos.ru:

   API_TOKEN = "ваш токен бота"

   API_KEY = "ваш ключ API"

2. Убедитесь, что файл data/TOKEN.py добавлен в .gitignore, чтобы токен не попал в публичный репозиторий.

### **3. Подготовка данных**

1. Запустите get_data.py для сбора актуальных данных с data.mos.ru.
2. Запустите файл data_processing.ipynb
3. Выполните поочередно все ячейки, это обработает исходные данные.

    После этого в корневой папке появится файл 'new_data.csv' с этими данными мы и будем работать далее.

### **4. Запуск бота**

Запустите ml_model_bot.py или ml_model.ipynb (в это варианте запустите все ячейки поочерёдно)

**Использование**

1. Откройте Telegram и найдите своего бота.
2. Отправьте команду /start.
3. Выберите район из предложенного списка.
4. Бот отправит графики с историческими данными и прогнозами загрязнения на два года вперёд.

## **Структура проекта**

├── data/

│   └── TOKEN.py            # Файл с токеном бота

│   └── data.csv            # Файл с исходными данными

├── data_processing.ipynb   # Обработка исходных данных

├── get_data.py             # Получение актуальных исходных данных

├── ml_model_bot.ipynb      # Основной скрипт бота

├── ml_model_bot.py         # Основной скрипт бота

├── new_data.csv            # Файл с обработанными данными

├── README.md               # Документация

├── requirements.txt        # Список зависимостей
